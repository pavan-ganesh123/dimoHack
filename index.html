<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MetaMask Wallet Integration</title>
    <link src="app.js">
    <script src="https://cdn.jsdelivr.net/npm/web3@1.5.2/dist/web3.min.js"></script>
    
</head>

<body>
    <h1>MetaMask Wallet Integration</h1>
    <button id="connectWalletBtn">Connect MetaMask Wallet</button>
    <div id="walletInfo"></div>
    <div id="ethereumBalance"></div>
    <div id="usdBalance"></div>
    <div id="dogeBalance"></div>
    <div id="btcBalance"></div>
    <div id="solBalance"></div>

    <script>
        async function connectToMetaMask() {
            // Check if MetaMask is installed
            if (window.ethereum) {
                // Initialize Web3.js
                window.web3 = new Web3(window.ethereum);
                
                try {
                    // Request access to the user's MetaMask accounts
                    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                    
                    // Display connected wallet address
                    document.getElementById('walletInfo').innerText = `Connected Wallet: ${accounts[0]}`;
                    
                    // Get the balance of Ethereum in the connected wallet
                    const balance = await web3.eth.getBalance(accounts[0]);
                    const ethereumBalance = web3.utils.fromWei(balance, 'ether');
                    document.getElementById('ethereumBalance').innerText = `Ethereum Balance: ${ethereumBalance} ETH`;
                    
                    // Fetch current ETH to USD conversion rate (using CoinGecko API)
                    const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=usd');
                    const data = await response.json();
                    const ethToUsdRate = data.ethereum.usd;
                    
                    // Convert Ethereum balance to USD
                    const usdBalance = parseFloat(ethereumBalance) * ethToUsdRate;
                    document.getElementById('usdBalance').innerText = `USD Balance: $${usdBalance.toFixed(2)}`;
                    
                    // Fetch current DOGE to ETH conversion rate (using CoinGecko API)
                    const dogeResponse = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=dogecoin&vs_currencies=eth');
                    const dogeData = await dogeResponse.json();
                    const dogeToEthRate = dogeData.dogecoin.eth;
                    
                    // Convert Ethereum balance to DOGE
                    const dogeBalance = parseFloat(ethereumBalance) / dogeToEthRate;
                    document.getElementById('dogeBalance').innerText = `DOGE Balance: ${dogeBalance.toFixed(8)}`;
                    
                    // Fetch current ETH to BTC conversion rate (using CoinGecko API)
                    const btcResponse = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=btc');
                    const btcData = await btcResponse.json();
                    const ethToBtcRate = btcData.ethereum.btc;
                    
                    // Convert Ethereum balance to BTC
                    const btcBalance = parseFloat(ethereumBalance) * ethToBtcRate;
                    document.getElementById('btcBalance').innerText = `BTC Balance: ${btcBalance.toFixed(8)}`;
                    
                    // Fetch current SOL to USD conversion rate (using CoinGecko API)
                    const solResponse = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=solana&vs_currencies=usd');
                    const solData = await solResponse.json();
                    const solToUsdRate = solData.solana.usd;
                    
                    // Convert Ethereum balance to SOL
                    const solBalance = usdBalance / solToUsdRate;
                    document.getElementById('solBalance').innerText = `SOL Balance: ${solBalance.toFixed(8)}`;
                    
                    // Display popup message
                    alert('MetaMask wallet connected successfully!');
                } catch (error) {
                    console.error(error);
                    alert('Failed to connect MetaMask wallet or fetch conversion rate.');
                }
            } else {
                alert('MetaMask extension not detected. Please install MetaMask to use this feature.');
            }
        }

        // Add event listener to connect wallet button
        document.getElementById('connectWalletBtn').addEventListener('click', connectToMetaMask);
    </script>
</body>
</html>